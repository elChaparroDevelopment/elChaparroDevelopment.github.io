<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>CHAPARRO - CHAPARROancy Website Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet"> 

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body onload="myfunction_onload()">

    <div>
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light shadow-sm px-5 py-3 py-lg-0">
        <a href="index.html" class="navbar-brand p-0">
            <h1 class="m-0 text-uppercase text-primary"><i class="far fa-smile text-primary me-2"></i>CHAPARRO</h1>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto py-0 me-n3">
                <a href="index.html" class="nav-item nav-link">Home</a>
                <a href="ventas.html" class="nav-item nav-link active">Sales</a>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->


    <!-- Page Header Start -->
    <div class="container-fluid bg-dark p-5">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="display-4 text-white">Ventas BallPark</h1>
                <a href="index.html">Home</a>
                <i class="far fa-square text-primary px-2"></i>
                <a href="">Sales / Ball Park</a>
            </div>
        </div>
    </div>
    <!-- Page Header End -->


    <!-- Services Start -->
    <div class="row">
        <div class="column">
            <div class="container-fluid pt-6 px-5" style="margin-bottom: 5%; max-width: 800px;">
                <div class="text-center mx-auto mb-5" style="max-width: 600px;">
                    <h1 class="display-5 mb-0">Productos</h1>
                    <hr class="w-25 mx-auto bg-primary">
                </div>
                <div class="row g-5" style="margin-left: 2%;">
                    <div class="col-lg-6 col-md-6" onclick="addItem('Hombre', ' ................. ', 0, 1)">
                        <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">Hombre</h3>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6" onclick="addItem('Mujer', ' ..................... ', 0, 1)">
                        <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">Mujer</h3>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6" onclick="openPopUp(1)">
                        <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">Tacos X1</h3>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6" onclick="openPopUp(2)">
                        <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">Tacos X3</h3>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6" onclick="openPopUp(3)">
                        <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">Quesadilla</h3>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6" onclick="addItem('Agua', ' ...................... ', 3, 1)">
                        <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">Agua</h3>
                            <p class="mb-0">$3.00</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6" onclick="addItem('Gaseosa', ' ................ ', 3, 1)">
                        <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">Gaseosa</h3>
                            <p class="mb-0">$3.00</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6" onclick="deleteTrue()">
                        <div id="hopefully" class="service-item text-center px-5" style="max-width: 250px; max-height: 150px;">
                            <h3 class="mb-3">DELETE</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="column">
            <div class="container-fluid pt-6 px-5" style="margin-bottom: 5%; max-width: 800px;">
                </div><div class="text-center mx-auto mb-5" style="max-width: 600px;">
                    <h1 class="display-5 mb-0">Ticket</h1>
                    <hr class="w-25 mx-auto bg-primary">
                </div>
                <div class="ticket">
                    <ol id="myList"></ol>
                </div>
                <div class="getChange d-flex align-items-right justify-content-right" style="margin-top: 5%; margin-left: 5%;">
                <label id="cambio"></label>
                </div>
                <div class="buttonsBB d-flex align-items-right justify-content-right" style="margin-top: 5%;">
                    <a onclick="clearAll('myList')" class="btn btn-primary py-md-3 px-md-5 me-3 rounded-pill">CLEAR</a>
                    <a onclick="calculateChange()" class="btn btn-secondary py-md-3 px-md-5 rounded-pill">GET CHANGE</a>
                    <a onclick="myfunction_sendOrder()" class="btn btn-secondary py-md-3 px-md-5 rounded-pill" style="background-color: #50C878;">CLOSE ORDER</a>
                </div>
            </div>
        </div>
      </div>
    <!-- Services End -->

    <div class="popUpTaco1" id="popUpTaco1">
        <div class="container-fluid pt-6 px-5" style="margin-bottom: 5%; max-width: 800px;">
            <div class="text-center mx-auto mb-5" style="max-width: 600px;">
                <h1 class="display-5 mb-0">Tacos X1</h1>
                <hr class="w-25 mx-auto bg-primary">
            </div>
            <div class="row g-5">
                <div class="col-lg-4 col-md-3" onclick="addItem('TacoBirria', ' ............. ', 6, 1); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Birria</h3>
                        <p class="mb-0">$6.00</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-3" onclick="addItem('TacoCarne', ' ............ ', 5, 1); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Carne Asada</h3>
                        <p class="mb-0">$5.00</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-3" onclick="addItem('TacoPollo', ' .............. ', 4, 1); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Pollo</h3>
                        <p class="mb-0">$4.00</p>
                    </div>
                </div>
            </div>
        </div>
        <a onclick="closePopUp()" class="btn btn-primary py-md-1 px-md-4 me-2 rounded-pill" style="margin-bottom: 2%;">Close</a>
    </div>

    <div class="popUpTaco3" id="popUpTaco3">
        <div class="container-fluid pt-6 px-5" style="margin-bottom: 5%; max-width: 800px;">
            <div class="text-center mx-auto mb-5" style="max-width: 600px;">
                <h1 class="display-5 mb-0">Tacos X3</h1>
                <hr class="w-25 mx-auto bg-primary">
            </div>
            <div class="row g-5">
                <div class="col-lg-4 col-md-3" onclick="addItem('TacoBirria', ' ............. ', 18, 3); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Birria</h3>
                        <p class="mb-0">$18.00</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-3" onclick="addItem('TacoCarne', ' ............ ', 15, 3); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Carne Asada</h3>
                        <p class="mb-0">$15.00</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-3" onclick="addItem('TacoPollo', ' .............. ', 12, 3); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Pollo</h3>
                        <p class="mb-0">$12.00</p>
                    </div>
                </div>
            </div>
        </div>
        <a onclick="closePopUp();" class="btn btn-primary py-md-1 px-md-4 me-2 rounded-pill" style="margin-bottom: 2%;">Close</a>
    </div>

    <div class="popUpQuesadilla" id="popUpQuesadilla">
        <div class="container-fluid pt-6 px-5" style="margin-bottom: 5%; max-width: 800px;">
            <div class="text-center mx-auto mb-5" style="max-width: 600px;">
                <h1 class="display-5 mb-0">Quesadilla</h1>
                <hr class="w-25 mx-auto bg-primary">
            </div>
            <div class="row g-5">
                <div class="col-lg-4 col-md-3" onclick="addItem('QuesadillaBirria', ' ... ', 18, 1); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Birria</h3>
                        <p class="mb-0">$18.00</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-3" onclick="addItem('QuesadillaCarne', ' .. ', 18, 1); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Carne Asada</h3>
                        <p class="mb-0">$18.00</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-3" onclick="addItem('QuesadillaPollo', ' .... ', 15, 1); closePopUp();">
                    <div class="service-item bg-secondary text-center px-5" style="max-width: 250px; max-height: 150px;">
                        <h3 class="mb-3">Pollo</h3>
                        <p class="mb-0">$15.00</p>
                    </div>
                </div>
            </div>
        </div>
        <a onclick="closePopUp()" class="btn btn-primary py-md-1 px-md-4 me-2 rounded-pill" style="margin-bottom: 2%;">Close</a>
    </div>
    
    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square rounded-circle back-to-top"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    
    <script>
        let sendList = document.getElementById("myList");
        let total = 0;
        let list = {};
        let data = [];
        let sendData = [];
        let isDelete = false;

        function openPopUp(popUpInt){
            if(popUpInt == 1){
                let popup = document.getElementById("popUpTaco1");
                popup.classList.add("open-popUp")
            } else if (popUpInt == 2){
                let popup = document.getElementById("popUpTaco3");
                popup.classList.add("open-popUp")
            } else{
                let popup = document.getElementById("popUpQuesadilla");
                popup.classList.add("open-popUp")
            }
        };

        function closePopUp(){
                let popup = document.getElementById("popUpTaco1");
                popup.classList.remove("open-popUp")
                popup = document.getElementById("popUpTaco3");
                popup.classList.remove("open-popUp")
                popup = document.getElementById("popUpQuesadilla");
                popup.classList.remove("open-popUp")
        };
    
        function addItem(item, separator, price, unit){
            clearBox("myList");
            sendData.splice(-1);
            if(!isDelete){
                if(data.includes(item)){
                    list[item] += unit;
                    let ind = data.indexOf(item);
                    sendData[ind]= String(item + separator + list[item] +" ....................... $" + price*list[item] +".00")
                }
                else{
                    data.push(item);
                    list[item] = unit;
                    sendData.push(item + separator + list[item] +" ....................... $" + price*list[item] +".00")
                }
                
                total += price;
            } else{
                if(data.includes(item)){
                    if(list[item] >= unit){
                        list[item] -= unit;
                    } else{
                        alert("Tenes menos de 3 Tacos de los que queres eliminar.")
                    }
                    let ind = data.indexOf(item);
                    if (list[item] == 0){
                        delete list.item;
                        data.splice(ind,1)
                        sendData.splice(ind,1)
                    } else{
                        sendData[ind]= String(item + separator + list[item] +" ....................... $" + price*list[item] +".00")
                    }
                    total -= price;
                } else {
                    alert("No tienen seleccionado ese producto")
                }
            }
            if(data.length > 0){
                sendData.push("Total ........................................... $" + total +".00")
            }
                
            sendData.forEach((item)=>{
                let li = document.createElement("li");
                li.innerText = item;
                sendList.appendChild(li);
            })
            console.log(list);
        };
        
        function calculateChange(){
            if(total==0){
                alert("No seas pendejo, trata otra vez...");
            } else{
                var userInp = prompt("Please enter amount of $ receiving", "");
                if(isNaN(userInp) || userInp == null){
                    alert("No seas pendejo, trata otra vez...");
                } else{
                var change = parseFloat(userInp) - parseFloat(total);
                document.getElementById('cambio').innerHTML = String('Debemos: $' + change+ '.00');
                }
            }

        }

        function deleteTrue(){
            var element = document.getElementById("hopefully");
            if(isDelete){
                isDelete = false;
                element.style.backgroundColor = "#FFFFFF";
            } else{
                isDelete = true;
                element.style.backgroundColor = "#F3525A";
            }
        }

        function clearAll(elementID){
            if (confirm('Are you sure you want to clear the order?')) {
                total = 0;
                list = {};
                data = [];
                sendData = [];
                document.getElementById(elementID).innerHTML = "";
                document.getElementById('cambio').innerHTML = "";
            } else {
                return false;
        
            }
        };

        function clearBox(elementID){
            document.getElementById(elementID).innerHTML = "";
        };

        // function sendOrder(){
        //     if(Object.keys(list).length === 0){
        //         alert('Add items to the order first.')
        //     } else{
        //         $.ajax({
        //         type: "POST",
        //         url: "~/pythoncode.py",
        //         data: { param: text}
        //         }).done(function( o ) {
        //         // do something
        //         });
        //     }
        // };

        function trial(){
            // load the python module
            pyodide.loadPackage('my_module').then(() => {
            // import the function
            const myFunction = pyodide.pyimport('createSheetBp').addRow;
            // call the function with parameters
            const result = myFunction(list);
            console.log(result);
        });
        }   
    
    </script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script>
        function myfunction_onload(){
            $.ajax({
                url: "backend/readWriteSheets/readWrite.py",
                 context: document.body
                })
            }
        </script>
    <script>
        function myfunction_sendOrder(){
            $.ajax({
                url:"backend/readWriteSheets/readWrite.py",
                context: document.body});
        };
    </script>

</body>

</html>

